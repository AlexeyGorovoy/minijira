<?xml version="1.0" encoding="UTF-8"?>

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                template="/pages/blocks/dafaultPage.xhtml">
    <ui:define name="title">#{msgs.editEmployee}</ui:define>

    <ui:define name="content">
        <h:form styleClass="form-actions">
            <h:panelGrid columns="1">

                <h4>#{msgs.editEmployee}</h4>

                <h:outputLabel value="#{msgs.name}: " />
                <h:inputText value="#{emplBean.employee.name}" validator="minijira.NotNullValidator" id="name" />
                <h:message for="name"  styleClass="alert-danger" />

                <h:outputLabel value="#{msgs.surname}: " />
                <h:inputText value="#{emplBean.employee.surname}" validator="minijira.NotNullValidator" id="surname" />
                <h:message for="surname"  styleClass="alert-danger" />

                <h:outputLabel value="#{msgs.phonenumber}: " />
                <h:inputText value="#{emplBean.employee.phonenumber}" validator="minijira.PhoneValidator" id="phonenumber" />
                <h:message for="phonenumber"  styleClass="alert-danger" />

                <h:outputLabel value="#{msgs.skype}: " />
                <h:inputText value="#{emplBean.employee.skype}" validator="minijira.NotNullValidator" id="skype" />
                <h:message for="skype"  styleClass="alert-danger" />

                <h4>#{msgs.userInfo}</h4>

                <h:outputLabel value="#{msgs.email}: " />
                <h:inputText value="#{emplBean.email}" id="email"  validator="minijira.EmailValidator" disabled="true" />
                <h:message for="email"  styleClass="alert-danger" />
                <!--
                <h:outputLabel value="#{msgs.password}: " />
                <h:inputText value="#{emplBean.password}" id="pass" />
                <h:message for="pass"  styleClass="alert-danger" />
                -->
                <h:outputLabel value="#{msgs.role}: " for="user_role" />
                <h:selectOneMenu value="#{emplBean.userRole}" id="user_role">
                    <f:selectItems value="#{databaseBean.roles}" var="role"
                                   itemLabel="#{role.rolename}" itemValue="#{role.rolename}" />
                </h:selectOneMenu>

            </h:panelGrid>

            <div id="advanced">
                <div class="modal-header">
                    <ul class="nav nav-pills pull-right">
                        <li class="active">
                            <a href="#date" data-toggle="pill">#{msgs.developer}</a>
                        </li>
                        <li><a href="#relevance" data-toggle="pill">#{msgs.tester}</a></li>

                        <li><a href="#dealership" data-toggle="pill">#{msgs.manager}</a></li>
                    </ul>
                    <h4>#{msgs.employeeType}</h4>
                </div>
                <div class="modal-body">

                    <div class="row-fluid">
                        <div class="tab-content">
                            <div class="tab-pane active" id="date">

                                <div class="controls controls-row">

                                    <h:outputLabel value="#{msgs.rank}: " for="dev_rank" />
                                    <h:selectOneMenu value="#{emplBean.devRankId}" id="dev_rank">
                                        <f:selectItems value="#{databaseBean.ranks}" var="r1"
                                                       itemLabel="#{r1.title}" itemValue="#{r1.id}" />
                                    </h:selectOneMenu>

                                    <h:outputLabel value="#{msgs.mainTech}: " for="main_tech" />
                                    <h:selectOneMenu value="#{emplBean.mainTechId}" id="main_tech">
                                        <f:selectItems value="#{databaseBean.techs}" var="tech"
                                                       itemLabel="#{tech.title}" itemValue="#{tech.id}" />
                                    </h:selectOneMenu>
                                    <br/>
                                    <h:commandButton value="#{msgs.save}" action="#{emplBean.saveEmployee('developer')}" styleClass="btn btn-danger" />

                                </div>

                            </div>
                            <div class="tab-pane" id="relevance">

                                <div class="controls controls-row">

                                    <h:outputLabel value="#{msgs.rank}: " for="ts_rank" />
                                    <h:selectOneMenu value="#{emplBean.rankId}" id="ts_rank">
                                        <f:selectItems value="#{databaseBean.ranks}" var="r1"
                                                       itemLabel="#{r1.title}" itemValue="#{r1.id}" />
                                    </h:selectOneMenu>

                                    <h:outputLabel value="#{msgs.testType}: " for="test_type" />
                                    <h:selectOneMenu value="#{emplBean.testTypeId}" id="test_type">
                                        <f:selectItems value="#{databaseBean.testTypes}" var="test"
                                                       itemLabel="#{test.title}" itemValue="#{test.id}" />
                                    </h:selectOneMenu>

                                </div>

                                <h:commandButton value="#{msgs.save}" action="#{emplBean.saveEmployee('tester')}" styleClass="btn btn-danger" />

                            </div>
                            <div class="tab-pane" id="dealership">

                                <div class="controls controls-row">

                                    <h:outputLabel value="#{msgs.managerType}: " for="manager_type" />
                                    <h:selectOneMenu value="#{emplBean.managerTypeId}" id="manager_type">
                                        <f:selectItems value="#{databaseBean.managerTypes}" var="mt"
                                                       itemLabel="#{mt.title}" itemValue="#{mt.id}" />
                                    </h:selectOneMenu>

                                </div>

                                <h:commandButton value="#{msgs.save}" action="#{emplBean.saveEmployee('manager')}" styleClass="btn btn-danger" />

                            </div>
                        </div>
                    </div>

                </div>
            </div>

        </h:form>

    </ui:define>

</ui:composition>
